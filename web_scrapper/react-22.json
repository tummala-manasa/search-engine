{"id": 22, "url": "https://react.dev/learn/reacting-to-input-with-state", "title": "Reacting to Input with State", "content": "'Reacting to Input with State – React', 'Stream React Conf on May 15-16.', 'Learn more.', 'React', 'Search', '⌘', 'Ctrl', 'K', 'Learn', 'Reference', 'Community', 'Blog', 'GET STARTED', 'Quick Start', ' ', 'Tutorial: Tic-Tac-Toe', ' ', 'Thinking in React', ' ', 'Installation', ' ', 'Start a New React Project', ' ', 'Add React to an Existing Project', ' ', 'Editor Setup', ' ', 'Using TypeScript', ' ', 'React Developer Tools', ' ', 'LEARN REACT', 'Describing the UI', ' ', 'Your First Component', ' ', 'Importing and Exporting Components', ' ', 'Writing Markup with JSX', ' ', 'JavaScript in JSX with Curly Braces', ' ', 'Passing Props to a Component', ' ', 'Conditional Rendering', ' ', 'Rendering Lists', ' ', 'Keeping Components Pure', ' ', 'Your UI as a Tree', ' ', 'Adding Interactivity', ' ', 'Responding to Events', ' ', \"State: A Component's Memory\", ' ', 'Render and Commit', ' ', 'State as a Snapshot', ' ', 'Queueing a Series of State Updates', ' ', 'Updating Objects in State', ' ', 'Updating Arrays in State', ' ', 'Managing State', ' ', 'Reacting to Input with State', ' ', 'Choosing the State Structure', ' ', 'Sharing State Between Components', ' ', 'Preserving and Resetting State', ' ', 'Extracting State Logic into a Reducer', ' ', 'Passing Data Deeply with Context', ' ', 'Scaling Up with Reducer and Context', ' ', 'Escape Hatches', ' ', 'Referencing Values with Refs', ' ', 'Manipulating the DOM with Refs', ' ', 'Synchronizing with Effects', ' ', 'You Might Not Need an Effect', ' ', 'Lifecycle of Reactive Effects', ' ', 'Separating Events from Effects', ' ', 'Removing Effect Dependencies', ' ', 'Reusing Logic with Custom Hooks', ' ', 'Is this page useful?', 'Learn React', 'Managing State', 'Reacting to Input with State', 'React provides a declarative way to manipulate the UI. Instead of manipulating individual pieces of the UI directly, you describe the different states that your component can be in, and switch between them in response to the user input. This is similar to how designers think about the UI.', '\\n', 'You will learn', '\\n', 'How declarative UI programming differs from imperative UI programming', '\\n', 'How to enumerate the different visual states your component can be in', '\\n', 'How to trigger the changes between the different visual states from code', '\\n', '\\n', 'How declarative UI compares to imperative ', '\\n', 'When you design UI interactions, you probably think about how the UI ', 'changes', ' in response to user actions. Consider a form that lets the user submit an answer:', '\\n', '\\n', 'When you type something into the form, the “Submit” button ', 'becomes enabled.', '\\n', 'When you press “Submit”, both the form and the button ', 'become disabled,', ' and a spinner ', 'appears.', '\\n', 'If the network request succeeds, the form ', 'gets hidden,', ' and the “Thank you” message ', 'appears.', '\\n', 'If the network request fails, an error message ', 'appears,', ' and the form ', 'becomes enabled', ' again.', '\\n', '\\n', 'In ', 'imperative programming,', ' the above corresponds directly to how you implement interaction. You have to write the exact instructions to manipulate the UI depending on what just happened. Here’s another way to think about this: imagine riding next to someone in a car and telling them turn by turn where to go.', '\\n', 'Illustrated by', ' ', 'Rachel Lee Nabors', '\\n', 'They don’t know where you want to go, they just follow your commands. (And if you get the directions wrong, you end up in the wrong place!) It’s called ', 'imperative', ' because you have to “command” each element, from the spinner to the button, telling the computer ', 'how', ' to update the UI.', '\\n', 'In this example of imperative UI programming, the form is built ', 'without', ' React. It only uses the browser ', 'DOM', ':', '\\n', 'index.js', 'index.html', 'index.js', ' Reset', 'Fork', 'async', ' ', 'function', ' ', 'handleFormSubmit', '(', 'e', ')', ' ', '{', '\\n  ', 'e', '.', 'preventDefault', '(', ')', ';', '\\n  ', 'disable', '(', 'textarea', ')', ';', '\\n  ', 'disable', '(', 'button', ')', ';', '\\n  ', 'show', '(', 'loadingMessage', ')', ';', '\\n  ', 'hide', '(', 'errorMessage', ')', ';', '\\n  ', 'try', ' ', '{', '\\n    ', 'await', ' ', 'submitForm', '(', 'textarea', '.', 'value', ')', ';', '\\n    ', 'show', '(', 'successMessage', ')', ';', '\\n    ', 'hide', '(', 'form', ')', ';', '\\n  ', '}', ' ', 'catch', ' ', '(', 'err', ')', ' ', '{', '\\n    ', 'show', '(', 'errorMessage', ')', ';', '\\n    ', 'errorMessage', '.', 'textContent', ' = ', 'err', '.', 'message', ';', '\\n  ', '}', ' ', 'finally', ' ', '{', '\\n    ', 'hide', '(', 'loadingMessage', ')', ';', '\\n    ', 'enable', '(', 'textarea', ')', ';', '\\n    ', 'enable', '(', 'button', ')', ';', '\\n  ', '}', '\\n', '}', '\\n\\n', 'function', ' ', 'handleTextareaChange', '(', ')', ' ', '{', '\\n  ', 'if', ' ', '(', 'textarea', '.', 'value', '.', 'length', ' === ', '0', ')', ' ', '{', '\\n    ', 'disable', '(', 'button', ')', ';', '\\n  ', '}', ' ', 'else', ' ', '{', '\\n    ', 'enable', '(', 'button', ')', ';', '\\n  ', '}', '\\n', '}', '\\n\\n', 'function', ' ', 'hide', '(', 'el', ')', ' ', '{', '\\n  ', 'el', '.', 'style', '.', 'display', ' = ', \"'none'\", ';', '\\n', '}', '\\n\\n', 'function', ' ', 'show', '(', 'el', ')', ' ', '{', '\\n  ', 'el', '.', 'style', '.', 'display', ' = ', \"''\", ';', '\\n', '}', '\\n\\n', 'function', ' ', 'enable', '(', 'el', ')', ' ', '{', '\\n  ', 'el', '.', 'disabled', ' = ', 'false', ';', '\\n', '}', '\\n\\n', 'function', ' ', 'disable', '(', 'el', ')', ' ', '{', '\\n  ', 'el', '.', 'disabled', ' = ', 'true', ';', '\\n', '}', '\\n\\n', 'function', ' ', 'submitForm', '(', 'answer', ')', ' ', '{', '\\n  ', \"// Pretend it's hitting the network.\", '\\n  ', 'return', ' ', 'new', ' ', 'Promise', '(', '(', 'resolve', ',', ' ', 'reject', ')', ' ', '=>', ' ', '{', '\\n    ', 'setTimeout', '(', '(', ')', ' ', '=>', ' ', '{', '\\n      ', 'if', ' ', '(', 'answer', '.', 'toLowerCase', '(', ')', ' === ', \"'istanbul'\", ')', ' ', '{', '\\n        ', 'resolve', '(', ')', ';', '\\n      ', '}', ' ', 'else', ' ', '{', '\\n        ', 'reject', '(', 'new', ' ', 'Error', '(', \"'Good guess but a wrong answer. Try again!'\", ')', ')', ';', '\\n      ', '}', '\\n    ', '}', ',', ' ', '1500', ')', ';', '\\n  ', '}', ')', ';', '\\n', '}', '\\n\\n', 'let', ' ', 'form', ' = ', 'document', '.', 'getElementById', '(', \"'form'\", ')', ';', '\\n', 'let', ' ', 'textarea', ' = ', 'document', '.', 'getElementById', '(', \"'textarea'\", ')', ';', '\\n', 'let', ' ', 'button', ' = ', 'document', '.', 'getElementById', '(', \"'button'\", ')', ';', '\\n', 'let', ' ', 'loadingMessage', ' = ', 'document', '.', 'getElementById', '(', \"'loading'\", ')', ';', '\\n', 'let', ' ', 'errorMessage', ' = ', 'document', '.', 'getElementById', '(', \"'error'\", ')', ';', '\\n', 'let', ' ', 'successMessage', ' = ', 'document', '.', 'getElementById', '(', \"'success'\", ')', ';', '\\n', 'form', '.', 'onsubmit', ' = ', 'handleFormSubmit', ';', '\\n', 'textarea', '.', 'oninput', ' = ', 'handleTextareaChange', ';', '\\n\\n', 'Show more', '\\n', 'Manipulating the UI imperatively works well enough for isolated examples, but it gets exponentially more difficult to manage in more complex systems. Imagine updating a page full of different forms like this one. Adding a new UI element or a new interaction would require carefully checking all existing code to make sure you haven’t introduced a bug (for example, forgetting to show or hide something).', '\\n', 'React was built to solve this problem.', '\\n', 'In React, you don’t directly manipulate the UI—meaning you don’t enable, disable, show, or hide components directly. Instead, you ', 'declare what you want to show,', ' and React figures out how to update the UI. Think of getting into a taxi and telling the driver where you want to go instead of telling them exactly where to turn. It’s the driver’s job to get you there, and they might even know some shortcuts you haven’t considered!', '\\n', 'Illustrated by', ' ', 'Rachel Lee Nabors', '\\n', 'Thinking about UI declaratively ', '\\n', 'You’ve seen how to implement a form imperatively above. To better understand how to think in React, you’ll walk through reimplementing this UI in React below:', '\\n', '\\n', 'Identify', ' your component’s different visual states', '\\n', 'Determine', ' what triggers those state changes', '\\n', 'Represent', ' the state in memory using ', 'useState', '\\n', 'Remove', ' any non-essential state variables', '\\n', 'Connect', ' the event handlers to set the state', '\\n', '\\n', 'Step 1: Identify your component’s different visual states ', '\\n', 'In computer science, you may hear about a ', '“state machine”', ' being in one of several “states”. If you work with a designer, you may have seen mockups for different “visual states”. React stands at the intersection of design and computer science, so both of these ideas are sources of inspiration.', '\\n', 'First, you need to visualize all the different “states” of the UI the user might see:', '\\n', '\\n', 'Empty', ': Form has a disabled “Submit” button.', '\\n', 'Typing', ': Form has an enabled “Submit” button.', '\\n', 'Submitting', ': Form is completely disabled. Spinner is shown.', '\\n', 'Success', ': “Thank you” message is shown instead of a form.', '\\n', 'Error', ': Same as Typing state, but with an extra error message.', '\\n', '\\n', 'Just like a designer, you’ll want to “mock up” or create “mocks” for the different states before you add logic. For example, here is a mock for just the visual part of the form. This mock is controlled by a prop called ', 'status', ' with a default value of ', \"'empty'\", ':', '\\n', 'App.js', 'App.js', ' Reset', 'Fork', 'export', ' ', 'default', ' ', 'function', ' ', 'Form', '(', '{', '\\n  ', 'status', ' = ', \"'empty'\", '\\n', '}', ')', ' ', '{', '\\n  ', 'if', ' ', '(', 'status', ' === ', \"'success'\", ')', ' ', '{', '\\n    ', 'return', ' ', '<', 'h1', '>', \"That's right!\", '</', 'h1', '>', '\\n  ', '}', '\\n  ', 'return', ' ', '(', '\\n    ', '<', '>', '\\n      ', '<', 'h2', '>', 'City quiz', '</', 'h2', '>', '\\n      ', '<', 'p', '>', '\\n        In which city is there a billboard that turns air into drinkable water?\\n      ', '</', 'p', '>', '\\n      ', '<', 'form', '>', '\\n        ', '<', 'textarea', ' ', '/>', '\\n        ', '<', 'br', ' ', '/>', '\\n        ', '<', 'button', '>', '\\n          Submit\\n        ', '</', 'button', '>', '\\n      ', '</', 'form', '>', '\\n    ', '</', '>', '\\n  ', ')', '\\n', '}', '\\n\\n', 'Show more', '\\n', 'You could call that prop anything you like, the naming is not important. Try editing ', \"status = 'empty'\", ' to ', \"status = 'success'\", ' to see the success message appear. Mocking lets you quickly iterate on the UI before you wire up any logic. Here is a more fleshed out prototype of the same component, still “controlled” by the ', 'status', ' prop:', '\\n', 'App.js', 'App.js', ' Reset', 'Fork', 'export', ' ', 'default', ' ', 'function', ' ', 'Form', '(', '{', '\\n  ', \"// Try 'submitting', 'error', 'success':\", '\\n  ', 'status', ' = ', \"'empty'\", '\\n', '}', ')', ' ', '{', '\\n  ', 'if', ' ', '(', 'status', ' === ', \"'success'\", ')', ' ', '{', '\\n    ', 'return', ' ', '<', 'h1', '>', \"That's right!\", '</', 'h1', '>', '\\n  ', '}', '\\n  ', 'return', ' ', '(', '\\n    ', '<', '>', '\\n      ', '<', 'h2', '>', 'City quiz', '</', 'h2', '>', '\\n      ', '<', 'p', '>', '\\n        In which city is there a billboard that turns air into drinkable water?\\n      ', '</', 'p', '>', '\\n      ', '<', 'form', '>', '\\n        ', '<', 'textarea', ' ', 'disabled', '=', '{', '\\n          ', 'status', ' === ', \"'submitting'\", '\\n        ', '}', ' ', '/>', '\\n        ', '<', 'br', ' ', '/>', '\\n        ', '<', 'button', ' ', 'disabled', '=', '{', '\\n          ', 'status', ' === ', \"'empty'\", ' ||\\n          ', 'status', ' === ', \"'submitting'\", '\\n        ', '}', '>', '\\n          Submit\\n        ', '</', 'button', '>', '\\n        ', '{', 'status', ' === ', \"'error'\", ' &&\\n          ', '<', 'p', ' ', 'className', '=', '\"Error\"', '>', '\\n            Good guess but a wrong answer. Try again!\\n          ', '</', 'p', '>', '\\n        ', '}', '\\n      ', '</', 'form', '>', '\\n      ', '</', '>', '\\n  ', ')', ';', '\\n', '}', '\\n\\n', 'Show more', '\\n', 'Deep Dive', 'Displaying many visual states at once ', 'Show Details', 'If a component has a lot of visual states, it can be convenient to show them all on one page:', 'App.js', 'Form.js', 'App.js', ' Reset', 'Fork', 'import', ' ', 'Form', ' ', 'from', ' ', \"'./Form.js'\", ';', '\\n\\n', 'let', ' ', 'statuses', ' = ', '[', '\\n  ', \"'empty'\", ',', '\\n  ', \"'typing'\", ',', '\\n  ', \"'submitting'\", ',', '\\n  ', \"'success'\", ',', '\\n  ', \"'error'\", ',', '\\n', ']', ';', '\\n\\n', 'export', ' ', 'default', ' ', 'function', ' ', 'App', '(', ')', ' ', '{', '\\n  ', 'return', ' ', '(', '\\n    ', '<', '>', '\\n      ', '{', 'statuses', '.', 'map', '(', 'status', ' ', '=>', ' ', '(', '\\n        ', '<', 'section', ' ', 'key', '=', '{', 'status', '}', '>', '\\n          ', '<', 'h4', '>', 'Form (', '{', 'status', '}', '):', '</', 'h4', '>', '\\n          ', '<', 'Form', ' ', 'status', '=', '{', 'status', '}', ' ', '/>', '\\n        ', '</', 'section', '>', '\\n      ', ')', ')', '}', '\\n    ', '</', '>', '\\n  ', ')', ';', '\\n', '}', '\\n\\n', 'Show more', 'Pages like this are often called “living styleguides” or “storybooks”.', '\\n', 'Step 2: Determine what triggers those state changes ', '\\n', 'You can trigger state updates in response to two kinds of inputs:', '\\n', '\\n', 'Human inputs,', ' like clicking a button, typing in a field, navigating a link.', '\\n', 'Computer inputs,', ' like a network response arriving, a timeout completing, an image loading.', '\\n', '\\n', 'Human inputs', 'Computer inputs', 'Illustrated by', ' ', 'Rachel Lee Nabors', '\\n', 'In both cases, ', 'you must set ', 'state variables', ' to update the UI.', ' For the form you’re developing, you will need to change state in response to a few different inputs:', '\\n', '\\n', 'Changing the text input', ' (human) should switch it from the ', 'Empty', ' state to the ', 'Typing', ' state or back, depending on whether the text box is empty or not.', '\\n', 'Clicking the Submit button', ' (human) should switch it to the ', 'Submitting', ' state.', '\\n', 'Successful network response', ' (computer) should switch it to the ', 'Success', ' state.', '\\n', 'Failed network response', ' (computer) should switch it to the ', 'Error', ' state with the matching error message.', '\\n', '\\n', 'Note', 'Notice that human inputs often require ', 'event handlers', '!', '\\n', 'To help visualize this flow, try drawing each state on paper as a labeled circle, and each change between two states as an arrow. You can sketch out many flows this way and sort out bugs long before implementation.', '\\n', 'Form states', '\\n', 'Step 3: Represent the state in memory with ', 'useState', ' ', '\\n', 'Next you’ll need to represent the visual states of your component in memory with ', 'useState', '.', ' Simplicity is key: each piece of state is a “moving piece”, and ', 'you want as few “moving pieces” as possible.', ' More complexity leads to more bugs!', '\\n', 'Start with the state that ', 'absolutely must', ' be there. For example, you’ll need to store the ', 'answer', ' for the input, and the ', 'error', ' (if it exists) to store the last error:', '\\n', 'const', ' ', '[', 'answer', ',', ' ', 'setAnswer', ']', ' = ', 'useState', '(', \"''\", ')', ';', 'const', ' ', '[', 'error', ',', ' ', 'setError', ']', ' = ', 'useState', '(', 'null', ')', ';', '\\n', 'Then, you’ll need a state variable representing which one of the visual states that you want to display. There’s usually more than a single way to represent that in memory, so you’ll need to experiment with it.', '\\n', 'If you struggle to think of the best way immediately, start by adding enough state that you’re ', 'definitely', ' sure that all the possible visual states are covered:', '\\n', 'const', ' ', '[', 'isEmpty', ',', ' ', 'setIsEmpty', ']', ' = ', 'useState', '(', 'true', ')', ';', 'const', ' ', '[', 'isTyping', ',', ' ', 'setIsTyping', ']', ' = ', 'useState', '(', 'false', ')', ';', 'const', ' ', '[', 'isSubmitting', ',', ' ', 'setIsSubmitting', ']', ' = ', 'useState', '(', 'false', ')', ';', 'const', ' ', '[', 'isSuccess', ',', ' ', 'setIsSuccess', ']', ' = ', 'useState', '(', 'false', ')', ';', 'const', ' ', '[', 'isError', ',', ' ', 'setIsError', ']', ' = ', 'useState', '(', 'false', ')', ';', '\\n', 'Your first idea likely won’t be the best, but that’s ok—refactoring state is a part of the process!', '\\n', 'Step 4: Remove any non-essential state variables ', '\\n', 'You want to avoid duplication in the state content so you’re only tracking what is essential. Spending a little time on refactoring your state structure will make your components easier to understand, reduce duplication, and avoid unintended meanings. Your goal is to ', 'prevent the cases where the state in memory doesn’t represent any valid UI that you’d want a user to see.', ' (For example, you never want to show an error message and disable the input at the same time, or the user won’t be able to correct the error!)', '\\n', 'Here are some questions you can ask about your state variables:', '\\n', '\\n', 'Does this state cause a paradox?', ' For example, ', 'isTyping', ' and ', 'isSubmitting', ' can’t both be ', 'true', '. A paradox usually means that the state is not constrained enough. There are four possible combinations of two booleans, but only three correspond to valid states. To remove the “impossible” state, you can combine these into a ', 'status', ' that must be one of three values: ', \"'typing'\", ', ', \"'submitting'\", ', or ', \"'success'\", '.', '\\n', 'Is the same information available in another state variable already?', ' Another paradox: ', 'isEmpty', ' and ', 'isTyping', ' can’t be ', 'true', ' at the same time. By making them separate state variables, you risk them going out of sync and causing bugs. Fortunately, you can remove ', 'isEmpty', ' and instead check ', 'answer.length === 0', '.', '\\n', 'Can you get the same information from the inverse of another state variable?', ' ', 'isError', ' is not needed because you can check ', 'error !== null', ' instead.', '\\n', '\\n', 'After this clean-up, you’re left with 3 (down from 7!) ', 'essential', ' state variables:', '\\n', 'const', ' ', '[', 'answer', ',', ' ', 'setAnswer', ']', ' = ', 'useState', '(', \"''\", ')', ';', 'const', ' ', '[', 'error', ',', ' ', 'setError', ']', ' = ', 'useState', '(', 'null', ')', ';', 'const', ' ', '[', 'status', ',', ' ', 'setStatus', ']', ' = ', 'useState', '(', \"'typing'\", ')', ';', ' ', \"// 'typing', 'submitting', or 'success'\", '\\n', 'You know they are essential, because you can’t remove any of them without breaking the functionality.', '\\n', 'Deep Dive', 'Eliminating “impossible” states with a reducer ', 'Show Details', 'These three variables are a good enough representation of this form’s state. However, there are still some intermediate states that don’t fully make sense. For example, a non-null ', 'error', ' doesn’t make sense when ', 'status', ' is ', \"'success'\", '. To model the state more precisely, you can ', 'extract it into a reducer.', ' Reducers let you unify multiple state variables into a single object and consolidate all the related logic!', '\\n', 'Step 5: Connect the event handlers to set state ', '\\n', 'Lastly, create event handlers that update the state. Below is the final form, with all event handlers wired up:', '\\n', 'App.js', 'App.js', ' Reset', 'Fork', 'import', ' ', '{', ' ', 'useState', ' ', '}', ' ', 'from', ' ', \"'react'\", ';', '\\n\\n', 'export', ' ', 'default', ' ', 'function', ' ', 'Form', '(', ')', ' ', '{', '\\n  ', 'const', ' ', '[', 'answer', ',', ' ', 'setAnswer', ']', ' = ', 'useState', '(', \"''\", ')', ';', '\\n  ', 'const', ' ', '[', 'error', ',', ' ', 'setError', ']', ' = ', 'useState', '(', 'null', ')', ';', '\\n  ', 'const', ' ', '[', 'status', ',', ' ', 'setStatus', ']', ' = ', 'useState', '(', \"'typing'\", ')', ';', '\\n\\n  ', 'if', ' ', '(', 'status', ' === ', \"'success'\", ')', ' ', '{', '\\n    ', 'return', ' ', '<', 'h1', '>', \"That's right!\", '</', 'h1', '>', '\\n  ', '}', '\\n\\n  ', 'async', ' ', 'function', ' ', 'handleSubmit', '(', 'e', ')', ' ', '{', '\\n    ', 'e', '.', 'preventDefault', '(', ')', ';', '\\n    ', 'setStatus', '(', \"'submitting'\", ')', ';', '\\n    ', 'try', ' ', '{', '\\n      ', 'await', ' ', 'submitForm', '(', 'answer', ')', ';', '\\n      ', 'setStatus', '(', \"'success'\", ')', ';', '\\n    ', '}', ' ', 'catch', ' ', '(', 'err', ')', ' ', '{', '\\n      ', 'setStatus', '(', \"'typing'\", ')', ';', '\\n      ', 'setError', '(', 'err', ')', ';', '\\n    ', '}', '\\n  ', '}', '\\n\\n  ', 'function', ' ', 'handleTextareaChange', '(', 'e', ')', ' ', '{', '\\n    ', 'setAnswer', '(', 'e', '.', 'target', '.', 'value', ')', ';', '\\n  ', '}', '\\n\\n  ', 'return', ' ', '(', '\\n    ', '<', '>', '\\n      ', '<', 'h2', '>', 'City quiz', '</', 'h2', '>', '\\n      ', '<', 'p', '>', '\\n        In which city is there a billboard that turns air into drinkable water?\\n      ', '</', 'p', '>', '\\n      ', '<', 'form', ' ', 'onSubmit', '=', '{', 'handleSubmit', '}', '>', '\\n        ', '<', 'textarea', '\\n          ', 'value', '=', '{', 'answer', '}', '\\n          ', 'onChange', '=', '{', 'handleTextareaChange', '}', '\\n          ', 'disabled', '=', '{', 'status', ' === ', \"'submitting'\", '}', '\\n        ', '/>', '\\n        ', '<', 'br', ' ', '/>', '\\n        ', '<', 'button', ' ', 'disabled', '=', '{', '\\n          ', 'answer', '.', 'length', ' === ', '0', ' ||\\n          ', 'status', ' === ', \"'submitting'\", '\\n        ', '}', '>', '\\n          Submit\\n        ', '</', 'button', '>', '\\n        ', '{', 'error', ' !== ', 'null', ' &&\\n          ', '<', 'p', ' ', 'className', '=', '\"Error\"', '>', '\\n            ', '{', 'error', '.', 'message', '}', '\\n          ', '</', 'p', '>', '\\n        ', '}', '\\n      ', '</', 'form', '>', '\\n    ', '</', '>', '\\n  ', ')', ';', '\\n', '}', '\\n\\n', 'function', ' ', 'submitForm', '(', 'answer', ')', ' ', '{', '\\n  ', \"// Pretend it's hitting the network.\", '\\n  ', 'return', ' ', 'new', ' ', 'Promise', '(', '(', 'resolve', ',', ' ', 'reject', ')', ' ', '=>', ' ', '{', '\\n    ', 'setTimeout', '(', '(', ')', ' ', '=>', ' ', '{', '\\n      ', 'let', ' ', 'shouldError', ' = ', 'answer', '.', 'toLowerCase', '(', ')', ' !== ', \"'lima'\", '\\n      ', 'if', ' ', '(', 'shouldError', ')', ' ', '{', '\\n        ', 'reject', '(', 'new', ' ', 'Error', '(', \"'Good guess but a wrong answer. Try again!'\", ')', ')', ';', '\\n      ', '}', ' ', 'else', ' ', '{', '\\n        ', 'resolve', '(', ')', ';', '\\n      ', '}', '\\n    ', '}', ',', ' ', '1500', ')', ';', '\\n  ', '}', ')', ';', '\\n', '}', '\\n\\n', 'Show more', '\\n', 'Although this code is longer than the original imperative example, it is much less fragile. Expressing all interactions as state changes lets you later introduce new visual states without breaking existing ones. It also lets you change what should be displayed in each state without changing the logic of the interaction itself.', '\\n', 'Recap', '\\n', 'Declarative programming means describing the UI for each visual state rather than micromanaging the UI (imperative).', '\\n', 'When developing a component:', '\\n', '\\n', 'Identify all its visual states.', '\\n', 'Determine the human and computer triggers for state changes.', '\\n', 'Model the state with ', 'useState', '.', '\\n', 'Remove non-essential state to avoid bugs and paradoxes.', '\\n', 'Connect the event handlers to set state.', '\\n', '\\n', '\\n', '\\n', 'Try out some challenges', '1', '. ', 'Add and remove a CSS class ', '2', '. ', 'Profile editor ', '3', '. ', 'Refactor the imperative solution without React ', 'Challenge', ' ', '1', ' of', ' ', '3', ': ', 'Add and remove a CSS class ', 'Make it so that clicking on the picture ', 'removes', ' the ', 'background--active', ' CSS class from the outer ', '<div>', ', but ', 'adds', ' the ', 'picture--active', ' class to the ', '<img>', '. Clicking the background again should restore the original CSS classes.', 'Visually, you should expect that clicking on the picture removes the purple background and highlights the picture border. Clicking outside the picture highlights the background, but removes the picture border highlight.', 'App.js', 'App.js', ' Reset', 'Fork', 'export', ' ', 'default', ' ', 'function', ' ', 'Picture', '(', ')', ' ', '{', '\\n  ', 'return', ' ', '(', '\\n    ', '<', 'div', ' ', 'className', '=', '\"background background--active\"', '>', '\\n      ', '<', 'img', '\\n        ', 'className', '=', '\"picture\"', '\\n        ', 'alt', '=', '\"Rainbow houses in Kampung Pelangi, Indonesia\"', '\\n        ', 'src', '=', '\"https://i.imgur.com/5qwVYb1.jpeg\"', '\\n      ', '/>', '\\n    ', '</', 'div', '>', '\\n  ', ')', ';', '\\n', '}', '\\n\\n', ' ', 'Show solution', 'Next ', 'Challenge', 'Previous', 'Managing State', 'Next', 'Choosing the State Structure', 'How do you like these docs?', 'Take our survey!', '©', '2024', 'Learn React', 'Quick Start', 'Installation', 'Describing the UI', 'Adding Interactivity', 'Managing State', 'Escape Hatches', 'API Reference', 'React APIs', 'React DOM APIs', 'Community', 'Code of Conduct', 'Meet the Team', 'Docs Contributors', 'Acknowledgements', 'More', 'Blog', 'React Native', 'Privacy', 'Terms', 'On this page', 'Overview', 'How declarative UI compares to imperative ', 'Thinking about UI declaratively ', 'Step 1: Identify your component’s different visual states ', 'Step 2: Determine what triggers those state changes ', 'Step 3: Represent the state in memory with ', 'useState', ' ', 'Step 4: Remove any non-essential state variables ', 'Step 5: Connect the event handlers to set state ', 'Recap', 'Challenges', "}